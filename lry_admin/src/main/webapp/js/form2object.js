(function(){window.form2object=function(h,f){h=typeof h=="string"?document.getElementById(h):h;f=f||".";var n=b(h);var s={};var g={};for(var m=0;m<n.length;m++){var o=n[m].value;if(o===""){continue}var e=n[m].name;var l=e.split(f);var p=s;for(var k=0;k<l.length;k++){var q=l[k];var d;if(q.indexOf("[]")>-1&&k==l.length-1){d=q.substr(0,q.indexOf("["));if(!p[d]){p[d]=[]}p[d].push(o)}else{if(q.indexOf("[")>-1){d=q.substr(0,q.indexOf("["));var r=q.replace(/^[a-z]+\[|\]$/gi,"");if(!g[d]){g[d]={}}if(!p[d]){p[d]=[]}if(k==l.length-1){p[d].push(o)}else{if(!g[d][r]){p[d].push({});g[d][r]=p[d][p[d].length-1]}}p=g[d][r]}else{if(k<l.length-1){if(!p[q]){p[q]={}}p=p[q]}else{p[q]=o}}}}}return s};function b(f){var d=[];var g=f.firstChild;while(g){if(g.nodeName.match(/INPUT|SELECT|TEXTAREA/i)){d.push({name:g.name,value:a(g)})}else{var e=b(g);d=d.concat(e)}g=g.nextSibling}return d}function a(d){if(d.nodeName=="INPUT"){if(d.type.toLowerCase()=="radio"||d.type.toLowerCase()=="checkbox"){if(d.checked){return d.value}}else{if(!d.type.toLowerCase().match(/button|reset|submit|image/i)){return d.value}}}else{if(d.nodeName=="TEXTAREA"){return d.value}else{if(d.nodeName=="SELECT"){return c(d)}}}return""}function c(h){var e=h.multiple;if(!e){return h.value}var d=[];for(var g=h.getElementsByTagName("option"),j=0,f=g.length;j<f;j++){if(g[j].selected){d.push(g[j].value)}}return d}window.form2json=window.form2object})();
